<!-- Load MathJax for LaTeX equations -->
<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$','$$'], ['\\[','\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script async id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
.math-large mjx-container[jax="CHTML"][display="true"] {
  font-size: 150% !important;
  font-weight: 500 !important;
  margin: 1.2em 0 !important;
  text-align: center !important;  
  color: #dc2626 !important; /* üî¥ Uy√™n th√™m v√†o ƒë·ªÉ c√¥ng th·ª©c To√°n c√≥ m√†u ƒë·ªè ƒë·∫≠m r√µ n√©t */
}  

  mjx-container {
  color: #dc2626 !important; /* Uy√™n th√™m v√†o ƒë·ªÉ √°p d·ª•ng cho to√†n b·ªô c√¥ng th·ª©c */
}

</style>

<!-- ========= GOOGLE TRANSLATE + N√öT EN / VI ========= -->

<!-- ·∫®n banner d√†i ·ªü tr√™n c√πng m√† Google t·ª± ch√®n -->
<style>
  .goog-te-banner-frame.skiptranslate {
    display: none !important;
  }
  body {
    top: 0 !important;
  }

  /* ·∫®n giao di·ªán g·ªëc c·ªßa Google Translate (dropdown + ch·ªØ) */
  #google_translate_element {
    display: none !important;
  }

  /* Style cho khung n√∫t chuy·ªÉn ng√¥n ng·ªØ */
  #lang-switch-wrapper {
    position: fixed;
    top: 10px;
    right: 10px;
    z-index: 9999;
    background: #ffffff;
    padding: 4px 8px;
    border-radius: 999px;
    box-shadow: 0 0 6px rgba(0,0,0,0.15);
    font-size: 13px;
  }

  #lang-switch-wrapper .lang-switch {
    display: flex;
    align-items: center;
    gap: 4px;
  }

  #lang-switch-wrapper .lang-switch button {
    border: 1px solid #e5e7eb;
    background: #f9fafb;
    border-radius: 999px;
    padding: 3px 10px;
    cursor: pointer;
    font-size: 12px;
  }

  #lang-switch-wrapper .lang-switch button.active {
    background: #111827;
    color: #ffffff;
    border-color: #111827;
    font-weight: 600;
  }
</style>

<script type="text/javascript">
  // T·∫°o khung ch·ª©a N√öT + widget Google (widget ·∫©n)
  function createGoogleTranslateDiv() {
    if (document.getElementById('lang-switch-wrapper')) return;

    var wrapper = document.createElement('div');
    wrapper.id = 'lang-switch-wrapper';

    wrapper.innerHTML = `
      <div class="lang-switch">
        <span style="margin-right:4px;">üåê</span>
        <button type="button" data-lang="vi" class="active" onclick="doGTranslate('vi|vi')">VI</button>
        <button type="button" data-lang="en" onclick="doGTranslate('vi|en')">EN</button>
      </div>
      <div id="google_translate_element"></div>
    `;

    document.body.appendChild(wrapper);
  }

  // H√†m Google g·ªçi sau khi script d·ªãch load xong
  function googleTranslateElementInit() {
    createGoogleTranslateDiv();

    new google.translate.TranslateElement(
      {
        pageLanguage: 'vi',          // blog g·ªëc l√† TI·∫æNG VI·ªÜT
        includedLanguages: 'vi,en',  // ch·ªâ cho ph√©p VI <-> EN
        autoDisplay: false
      },
      'google_translate_element'
    );
  }

  // ƒê·∫£m b·∫£o div ƒë∆∞·ª£c t·∫°o sau khi DOM s·∫µn s√†ng
  document.addEventListener('DOMContentLoaded', createGoogleTranslateDiv);

  // ================== H·ªñ TR·ª¢ N√öT EN / VI ==================
  function GTranslateFireEvent(element, event) {
    try {
      if (document.createEvent) {
        var evt = document.createEvent('HTMLEvents');
        evt.initEvent(event, true, true);
        element.dispatchEvent(evt);
      } else {
        var evt = document.createEventObject();
        element.fireEvent('on' + event, evt);
      }
    } catch (e) {}
  }

  function doGTranslate(lang_pair) {
    if (lang_pair.value) lang_pair = lang_pair.value;
    if (lang_pair === '') return;

    var lang = lang_pair.split('|')[1];
    var select = document.querySelector('select.goog-te-combo');

    // Ch·ªù widget Google t·∫°o xong select
    if (!select) {
      setTimeout(function () { doGTranslate(lang_pair); }, 500);
      return;
    }

    // ƒê·ªïi ng√¥n ng·ªØ trong select (Google x·ª≠ l√Ω ph·∫ßn c√≤n l·∫°i)
    select.value = lang;
    GTranslateFireEvent(select, 'change');

    // ƒê·ªïi tr·∫°ng th√°i active c·ªßa n√∫t
    var buttons = document.querySelectorAll('#lang-switch-wrapper .lang-switch button');
    buttons.forEach(function (btn) {
      if (btn.getAttribute('data-lang') === lang) {
        btn.classList.add('active');
      } else {
        btn.classList.remove('active');
      }
    });
  }
</script>

<!-- Script ch√≠nh c·ªßa Google Translate -->
<script type="text/javascript"
  src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit">
</script>

